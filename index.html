<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>MuslimPro & Prayer Dashboard</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Amiri:wght@400;700&family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
    <!-- Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <!-- React Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f6f8f6",
                        "background-dark": "#102216",
                        "surface-dark": "#1a1d1b",
                        "surface-dark-hover": "#28392e",
                        "surface-light": "#ffffff",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"],
                        "arabic": ["Amiri", "serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                    animation: {
                        'marquee': 'marquee 25s linear infinite',
                        'fade-in': 'fadeIn 1s ease-in-out',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #28392e; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #13ec5b; 
        }
        .compass-dial {
            transition: transform 0.5s cubic-bezier(0.4, 2, 0.55, 0.44);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white transition-colors duration-200 overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, memo, useMemo, createContext, useContext, useRef } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate } = ReactRouterDOM;

        // --- GEMINI API CONFIGURATION ---
        const apiKey = ""; 

        const callGeminiAPI = async (prompt, systemInstruction = "") => {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            arabic: { type: "STRING" },
                            latin: { type: "STRING" },
                            translation: { type: "STRING" },
                            advice: { type: "STRING" }
                        }
                    }
                }
            };

            const delays = [1000, 2000, 4000, 8000, 16000];
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    
                    const data = await response.json();
                    let text = null;
                    if (data.candidates && 
                        data.candidates.length > 0 && 
                        data.candidates[0].content && 
                        data.candidates[0].content.parts && 
                        data.candidates[0].content.parts.length > 0) {
                        text = data.candidates[0].content.parts[0].text;
                    }
                    
                    return JSON.parse(text);
                } catch (error) {
                    if (i === 4) throw error;
                    await new Promise(resolve => setTimeout(resolve, delays[i]));
                }
            }
        };

        // --- CONTEXT & GLOBAL STATE ---
        const SettingsContext = createContext();

        const defaultBg = "https://lh3.googleusercontent.com/aida-public/AB6AXuAOrQLKRUmFQhPxWSXwhFKntvqt5JvcRPZHSGEfJ6534s7zRxMYnhaVjiPPkQb1dSZerTsg6wuTZGGxx3ldiOsjAcwCPu5eXkl9Sh31aJykos91Vq4LS-XOvIdMt9-Lk2PEZSEb3Yy8MYY89dlvY-l8Bpgmn5aJs7P3TRtrwUCaytrFFcAo64P_Bl8hcaxQGUjEsNHbGrRYLfi8MNrFtYTDY-_FVk1V8cUKnIvDDK-pdMtl2WtaznRR5qWi3vmydcqQv2gcQj8jrVk";
        
        const slideshowImages = [
            defaultBg,
            "https://lh3.googleusercontent.com/aida-public/AB6AXuAIQlg9ExURoitbx-siETAk3sji_tYFU2RD2Wb3QHdPwd1H6L68cqmXzKWR48SuW5Q1TgJGbybsbWl77ODKERMY87uU11t43rTCxDRFLaaLxIUir7qXgGhdx1vRzV902TIJpEfXx1RcIX0zVXIdFXNiLLEZOafUijcZfxhvHebu9MTR6EPT6CCadKdhe1-er33j3KC7ryz7jTrysoFFBsT_XX5k4Ny-U6lVS5v63bPOkh4wK6p1Ix4_BXrPe-AwspexXFcJIaDQFHo",
            "https://lh3.googleusercontent.com/aida-public/AB6AXuB2LoTTl_o0k-4Xw86X_LRqqxQIicJpI1M_7AHxoPXjYwPEROPNoYl6t12YQuZKgb2YJFYswu81I8cZd7OmIRIRlQCn362IBxm6m--IkVU78Ndk1m7TSXg7veU9tbE49Um5uhUTf2rGHWHfBM5g19xmfd6tq9z3iE4kO9TUZCzJR4sKlL9t5agvMP6fAgbP2dV8q8thdKo3cReM04o95GiRAw5JhKgj1cWWMj6tFTxbtNBeBwDhpACJ_4Ne5MOe79ED9n1fH_b6YTw"
        ];

        const SettingsProvider = ({ children }) => {
            const loadSettings = () => {
                const saved = localStorage.getItem('muslimProSettings');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (e) { console.error("Error parsing settings", e); }
                }
                return {
                    location: {
                        city: "Jakarta Selatan, DKI Jakarta",
                        lat: -6.2088,
                        lng: 106.8456
                    },
                    appearance: {
                        bgImage: defaultBg,
                        customBg: null,
                        slideshowActive: false,
                        slideshowInterval: 10,
                        opacity: 60,
                        blur: 4
                    },
                    runningText: {
                        active: true,
                        text: "Selamat datang di Masjid Raya. Mohon nonaktifkan HP saat sholat berlangsung. Kajian rutin setiap Ahad Ba'da Subuh.",
                        speed: 5,
                        size: "medium"
                    }
                };
            };

            const [settings, setSettings] = useState(loadSettings);

            useEffect(() => {
                localStorage.setItem('muslimProSettings', JSON.stringify(settings));
            }, [settings]);

            const updateSettings = (section, key, value) => {
                setSettings(prev => ({
                    ...prev,
                    [section]: {
                        ...prev[section],
                        [key]: value
                    }
                }));
            };

            const handleImageUpload = (file) => {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const base64String = reader.result;
                        setSettings(prev => ({
                            ...prev,
                            appearance: {
                                ...prev.appearance,
                                bgImage: base64String,
                                customBg: base64String,
                                slideshowActive: false
                            }
                        }));
                        resolve(base64String);
                    };
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            };

            return (
                <SettingsContext.Provider value={{ settings, updateSettings, handleImageUpload, slideshowImages }}>
                    {children}
                </SettingsContext.Provider>
            );
        };

        // --- SUB-COMPONENTS ---

        const ClockDisplay = memo(() => {
            const [time, setTime] = useState(new Date());
            useEffect(() => {
                const timer = setInterval(() => {
                    const now = new Date();
                    setTime(now);
                }, 1000);
                return () => clearInterval(timer);
            }, []);
            return (
                <div className="flex flex-col items-start md:items-end">
                    <div className="text-sm font-medium text-primary uppercase tracking-wider mb-1">Current Time</div>
                    <h2 className="text-4xl font-mono font-bold text-slate-900 dark:text-white tabular-nums drop-shadow-md">
                        {time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                        <span className="text-lg text-slate-500 ml-1">PM</span>
                    </h2>
                </div>
            );
        });

        const PrayerCountdown = memo(({ targetDate }) => {
            const [countdown, setCountdown] = useState({ h: 0, m: 0, s: 0 });

            useEffect(() => {
                if (!targetDate) return;

                const timer = setInterval(() => {
                    const now = new Date();
                    const diff = targetDate - now;

                    if (diff <= 0) {
                        setCountdown({ h: 0, m: 0, s: 0 });
                    } else {
                        const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
                        const m = Math.floor((diff / (1000 * 60)) % 60);
                        const s = Math.floor((diff / 1000) % 60);
                        setCountdown({ h, m, s });
                    }
                }, 1000);

                return () => clearInterval(timer);
            }, [targetDate]);

            const fmt = (n) => String(n).padStart(2, '0');

            return (
                <div className="flex flex-wrap justify-center gap-3 sm:gap-6">
                    <div className="flex flex-col items-center gap-2 sm:gap-3">
                        <div className="flex h-20 w-16 sm:h-32 sm:w-28 items-center justify-center rounded-xl bg-[#111813] border border-[#28392e] shadow-inner group relative overflow-hidden">
                            <div className="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <p className="text-3xl sm:text-6xl font-bold text-white tabular-nums tracking-tight">{fmt(countdown.h)}</p>
                        </div>
                        <span className="text-[10px] sm:text-xs font-bold uppercase tracking-widest text-slate-500">Hours</span>
                    </div>
                    <div className="flex h-20 sm:h-32 items-center justify-center pb-6 sm:pb-8">
                        <span className="text-2xl sm:text-4xl text-slate-600 font-bold animate-pulse">:</span>
                    </div>
                    <div className="flex flex-col items-center gap-2 sm:gap-3">
                        <div className="flex h-20 w-16 sm:h-32 sm:w-28 items-center justify-center rounded-xl bg-[#111813] border border-[#28392e] shadow-inner group relative overflow-hidden">
                            <div className="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <p className="text-3xl sm:text-6xl font-bold text-primary tabular-nums tracking-tight">{fmt(countdown.m)}</p>
                        </div>
                        <span className="text-[10px] sm:text-xs font-bold uppercase tracking-widest text-slate-500">Minutes</span>
                    </div>
                    <div className="flex h-20 sm:h-32 items-center justify-center pb-6 sm:pb-8">
                        <span className="text-2xl sm:text-4xl text-slate-600 font-bold animate-pulse">:</span>
                    </div>
                    <div className="flex flex-col items-center gap-2 sm:gap-3">
                        <div className="flex h-20 w-16 sm:h-32 sm:w-28 items-center justify-center rounded-xl bg-[#111813] border border-[#28392e] shadow-inner group relative overflow-hidden">
                            <div className="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <p className="text-3xl sm:text-6xl font-bold text-white tabular-nums tracking-tight">{fmt(countdown.s)}</p>
                        </div>
                        <span className="text-[10px] sm:text-xs font-bold uppercase tracking-widest text-slate-500">Seconds</span>
                    </div>
                </div>
            );
        });

        const PrayerCard = memo(({ name, time, ampm, icon, active, highlightColor }) => {
            const baseClasses = "group relative flex flex-col gap-1 p-5 rounded-xl transition-all duration-300";
            const inactiveClasses = "bg-surface-dark/95 backdrop-blur-sm border border-[#28392e] hover:border-primary/30";
            const activeClasses = "bg-[#1a2e21]/95 backdrop-blur-sm border border-primary shadow-[0_0_15px_rgba(19,236,91,0.1)] transform scale-105 z-10";
            return (
                <div className={`${baseClasses} ${active ? activeClasses : inactiveClasses}`}>
                    {active && (
                        <div className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-0.5 bg-primary rounded-full text-[10px] font-bold text-black uppercase tracking-wider">Next</div>
                    )}
                    <div className="flex justify-between items-start mb-2">
                        <span className={`text-sm ${active ? 'font-bold text-primary' : 'font-medium text-slate-400'}`}>{name}</span>
                        <span className={`material-symbols-outlined text-[20px] transition-colors ${active ? 'text-primary' : `text-slate-600 group-hover:${highlightColor || 'text-primary'}`}`}>{icon}</span>
                    </div>
                    <p className={`font-bold tracking-tight ${active ? 'text-3xl text-white' : 'text-2xl text-white'}`}>{time}</p>
                    <p className={`text-xs ${active ? 'text-primary/80 font-medium' : 'text-slate-500'}`}>{ampm}</p>
                </div>
            );
        });

        const HadithSection = memo(() => (
            <div className="lg:col-span-2 rounded-2xl bg-gradient-to-br from-surface-dark/95 to-[#16211a]/95 backdrop-blur-sm p-6 border border-[#28392e] flex items-center gap-6">
                <div className="hidden sm:flex h-16 w-16 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                    <span className="material-symbols-outlined text-3xl">menu_book</span>
                </div>
                <div>
                    <h4 className="text-sm font-bold uppercase text-primary mb-2">Hadith of the Day</h4>
                    <p className="text-lg font-medium text-white italic leading-relaxed">"The most beloved of deeds to Allah are those that are most consistent, even if they are small."</p>
                    <p className="mt-2 text-sm text-slate-400">â€” Prophet Muhammad (PBUH) [Bukhari & Muslim]</p>
                </div>
            </div>
        ));

        const RunningTextBanner = memo(({ active, text, speed, size }) => {
            if (!active) return null;
            
            const fontSizeClass = {
                small: "text-sm",
                medium: "text-base",
                large: "text-lg",
                xl: "text-xl"
            }[size] || "text-base";

            const duration = 20 - (speed * 1.5); 

            return (
                <div className="fixed bottom-0 left-0 right-0 z-50 bg-surface-dark/95 backdrop-blur-md border-t border-[#28392e] h-12 flex items-center overflow-hidden shadow-[0_-4px_20px_rgba(0,0,0,0.3)]">
                    <div className="flex items-center justify-center bg-primary text-black font-bold px-4 h-full shrink-0 z-10 text-sm uppercase tracking-wider shadow-md">
                        Info
                    </div>
                    <div className="flex-1 overflow-hidden relative h-full flex items-center">
                        <div 
                            className="whitespace-nowrap absolute will-change-transform"
                            style={{ 
                                animation: `marquee ${Math.max(5, duration)}s linear infinite`,
                                paddingLeft: '100%' 
                            }}
                        >
                            <span className={`${fontSizeClass} font-medium text-white tracking-wide`}>{text}</span>
                        </div>
                    </div>
                </div>
            );
        });

        const AIDuaGenerator = () => {
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState(null);
            const [error, setError] = useState('');

            const handleGenerate = async () => {
                if (!input.trim()) return;
                setLoading(true);
                setError('');
                setResult(null);

                const prompt = `User sedang merasakan: "${input}". Berikan doa yang relevan dari Al-Quran atau Hadits.`;
                const system = "Anda adalah asisten Islami yang bijak. Berikan respons dalam format JSON valid dengan kunci: 'arabic' (teks arab doa), 'latin' (transliterasi), 'translation' (terjemahan bahasa Indonesia), dan 'advice' (nasihat singkat islami yang menenangkan). Pastikan JSON valid.";

                try {
                    const data = await callGeminiAPI(prompt, system);
                    setResult(data);
                } catch (err) {
                    setError('Gagal menghasilkan doa. Silakan coba lagi.');
                    console.error(err);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="flex flex-col gap-6 w-full">
                    <div className="bg-gradient-to-r from-emerald-900/50 to-primary/10 rounded-xl p-6 border border-primary/20">
                        <h3 className="text-lg font-bold text-white mb-2 flex items-center gap-2">
                            <span className="material-symbols-outlined text-primary">auto_awesome</span>
                            Pencari Doa AI
                        </h3>
                        <p className="text-sm text-slate-300 mb-4">
                            Ceritakan apa yang sedang Anda rasakan atau butuhkan (misal: "Saya merasa cemas", "Baru dapat pekerjaan"), AI akan mencarikan doa yang tepat.
                        </p>
                        <div className="flex flex-col sm:flex-row gap-3">
                            <input 
                                type="text" 
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                placeholder="Contoh: Saya sedang sedih..."
                                className="flex-1 rounded-lg bg-surface-dark border border-slate-700 text-white px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent outline-none"
                                onKeyPress={(e) => e.key === 'Enter' && handleGenerate()}
                            />
                            <button 
                                onClick={handleGenerate}
                                disabled={loading || !input.trim()}
                                className="bg-primary text-black font-bold px-6 py-3 rounded-lg hover:bg-[#0fdc50] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary/20"
                            >
                                {loading ? (
                                    <span className="animate-spin material-symbols-outlined text-xl">progress_activity</span>
                                ) : (
                                    <span className="material-symbols-outlined text-xl">send</span>
                                )}
                                <span className="hidden sm:inline">Cari Doa</span>
                            </button>
                        </div>
                        {error && <p className="text-red-400 text-sm mt-2">{error}</p>}
                    </div>

                    {result && (
                        <div className="animate-fade-in space-y-6">
                            <div className="bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-800 rounded-xl p-6 md:p-8 text-center shadow-lg relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"></div>
                                <div className="mb-6">
                                    <h2 className="font-arabic text-3xl md:text-4xl leading-relaxed text-slate-800 dark:text-white mb-6">
                                        {result.arabic}
                                    </h2>
                                    <p className="text-emerald-600 dark:text-primary font-medium italic mb-2 text-lg">
                                        {result.latin}
                                    </p>
                                    <p className="text-slate-600 dark:text-slate-300">
                                        "{result.translation}"
                                    </p>
                                </div>
                                <div className="flex justify-center">
                                    <div className="bg-primary/10 border border-primary/20 rounded-lg px-4 py-3 max-w-2xl">
                                        <p className="text-sm text-slate-700 dark:text-slate-200 flex items-start gap-2 text-left">
                                            <span className="material-symbols-outlined text-primary shrink-0 mt-0.5">lightbulb</span>
                                            {result.advice}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- PAGE COMPONENTS ---

        // PRAYER SCHEDULE CONSTANT
        const PRAYER_SCHEDULE = [
            { name: "Fajr", time: "04:30", ampm: "AM", icon: "wb_twilight" },
            { name: "Sunrise", time: "05:45", ampm: "AM", icon: "wb_sunny" },
            { name: "Dhuhr", time: "11:50", ampm: "AM", icon: "light_mode" },
            { name: "Asr", time: "15:00", ampm: "PM", icon: "sunny" },
            { name: "Maghrib", time: "17:55", ampm: "PM", icon: "wb_twilight" },
            { name: "Isha", time: "19:10", ampm: "PM", icon: "dark_mode" }
        ];

        const DashboardPage = () => {
            const navigate = useNavigate();
            const { settings, slideshowImages } = useContext(SettingsContext);
            const [bgImage, setBgImage] = useState(settings.appearance.bgImage);
            const [currentSlideIndex, setCurrentSlideIndex] = useState(0);
            const [nextPrayer, setNextPrayer] = useState(null);

            // Logic to calculate next prayer
            useEffect(() => {
                const calculateNextPrayer = () => {
                    const now = new Date();
                    const nowTime = now.getHours() * 60 + now.getMinutes();

                    let found = null;
                    let targetDate = new Date();

                    for (let p of PRAYER_SCHEDULE) {
                        const [h, m] = p.time.split(':').map(Number);
                        const prayerTime = h * 60 + m;
                        
                        if (prayerTime > nowTime) {
                            found = p;
                            targetDate.setHours(h, m, 0, 0);
                            break;
                        }
                    }

                    // If no prayer found today (e.g. after Isha), next is Fajr tomorrow
                    if (!found) {
                        found = PRAYER_SCHEDULE[0];
                        const [h, m] = found.time.split(':').map(Number);
                        targetDate.setDate(targetDate.getDate() + 1);
                        targetDate.setHours(h, m, 0, 0);
                    }

                    setNextPrayer({ ...found, targetDate });
                };

                calculateNextPrayer();
                // Re-check every minute to update the next prayer if current one passes
                const interval = setInterval(calculateNextPrayer, 60000); 
                return () => clearInterval(interval);
            }, []);

            // Slideshow Logic
            useEffect(() => {
                if (settings.appearance.slideshowActive) {
                    const images = settings.appearance.customBg 
                        ? [...slideshowImages, settings.appearance.customBg] 
                        : slideshowImages;

                    const intervalTime = settings.appearance.slideshowInterval * 60 * 1000; 
                    
                    setBgImage(images[currentSlideIndex % images.length]);

                    const interval = setInterval(() => {
                        setCurrentSlideIndex(prev => {
                            const nextIndex = (prev + 1) % images.length;
                            setBgImage(images[nextIndex]);
                            return nextIndex;
                        });
                    }, intervalTime);

                    return () => clearInterval(interval);
                } else {
                    setBgImage(settings.appearance.bgImage);
                }
            }, [settings.appearance.slideshowActive, settings.appearance.slideshowInterval, settings.appearance.bgImage, settings.appearance.customBg, currentSlideIndex, slideshowImages]);

            return (
                <div className="relative z-10 flex min-h-screen w-full flex-col overflow-x-hidden font-display pb-12">
                    <div className="fixed inset-0 z-0 select-none pointer-events-none bg-black">
                        <div 
                            className="absolute inset-0 bg-cover bg-center transition-all duration-[2000ms] ease-in-out"
                            style={{ 
                                backgroundImage: `url("${bgImage}")`,
                                filter: `blur(${settings.appearance.blur}px)`
                            }}
                        ></div>
                        <div 
                            className="absolute inset-0 bg-background-light dark:bg-background-dark transition-opacity duration-500"
                            style={{ opacity: settings.appearance.opacity / 100 }}
                        ></div>
                    </div>

                    <div className="relative z-10 flex flex-col min-h-screen">
                        <header className="sticky top-0 z-50 w-full border-b border-gray-200 dark:border-[#28392e] bg-white/80 dark:bg-[#111813]/80 backdrop-blur-md">
                            <div className="px-6 lg:px-12 py-4">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <div className="flex items-center justify-center size-10 rounded-lg bg-primary/10 text-primary">
                                            <span className="material-symbols-outlined text-2xl">mosque</span>
                                        </div>
                                        <h2 className="text-xl font-bold tracking-tight text-slate-900 dark:text-white">PrayerTimes</h2>
                                    </div>
                                    <nav className="hidden md:flex items-center gap-8">
                                            <Link className="text-sm font-semibold text-primary" to="/">Dashboard</Link>
                                            <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/schedule">Monthly Schedule</Link>
                                            <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/qibla">Qibla Compass</Link>
                                            <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/settings">Settings</Link>
                                    </nav>
                                    <button className="hidden sm:flex items-center gap-2 rounded-lg bg-surface-dark-hover px-4 py-2 text-sm font-medium text-white hover:bg-opacity-80 transition-colors border border-transparent hover:border-primary/50">
                                        <span className="material-symbols-outlined text-[18px] text-primary">location_on</span>
                                        <span className="truncate max-w-[150px]">{settings.location.city}</span>
                                    </button>
                                    <button className="md:hidden p-2 text-slate-600 dark:text-white">
                                        <span className="material-symbols-outlined">menu</span>
                                    </button>
                                </div>
                            </div>
                        </header>

                        <main className="flex-1 px-4 sm:px-8 lg:px-12 py-8 mb-8">
                            <div className="mx-auto max-w-7xl flex flex-col gap-10">
                                <div className="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-gray-200 dark:border-[#28392e] pb-6">
                                    <div className="flex flex-col gap-2">
                                        <p className="text-3xl sm:text-4xl font-black tracking-tight text-slate-900 dark:text-white text-shadow-sm">Monday, 24 October 2023</p>
                                        <div className="flex items-center gap-2 text-slate-500 dark:text-[#9db9a6]">
                                            <span className="material-symbols-outlined text-[18px]">calendar_month</span>
                                            <p className="text-base font-medium">12 Ramadan 1445 H</p>
                                            <span className="mx-2 opacity-50">|</span>
                                            <p className="text-sm">Way of the Salaf Calculation Method</p>
                                        </div>
                                    </div>
                                    <ClockDisplay />
                                </div>

                                <section className="relative overflow-hidden rounded-2xl bg-surface-dark/90 backdrop-blur-md border border-[#28392e] p-8 sm:p-12 lg:p-16 text-center shadow-2xl">
                                    <div className="absolute inset-0 opacity-5 pointer-events-none" style={{ backgroundImage: 'radial-gradient(#13ec5b 1px, transparent 1px)', backgroundSize: '24px 24px' }}></div>
                                    <div className="absolute top-0 right-0 p-12 opacity-10 pointer-events-none">
                                        <span className="material-symbols-outlined text-9xl text-primary transform rotate-12">schedule</span>
                                    </div>
                                    <div className="relative z-10 flex flex-col items-center gap-6 sm:gap-8">
                                        <div className="flex flex-col items-center">
                                            <span className="inline-flex items-center gap-2 rounded-full bg-primary/10 px-4 py-1.5 text-sm font-bold text-primary mb-4 border border-primary/20">
                                                <span className="relative flex h-2 w-2">
                                                    <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                                                    <span className="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                                                </span>
                                                UPCOMING PRAYER
                                            </span>
                                            {/* Dynamic Prayer Name */}
                                            <h1 className="text-4xl sm:text-5xl lg:text-6xl font-black text-white tracking-tight mb-2">
                                                {nextPrayer ? nextPrayer.name : "Loading..."}
                                            </h1>
                                            <p className="text-slate-400 text-sm font-bold uppercase tracking-widest">Time to Adhan</p>
                                        </div>
                                        
                                        {/* Dynamic Countdown */}
                                        {nextPrayer && <PrayerCountdown targetDate={nextPrayer.targetDate} />}

                                        <Link to="/dua" className="group relative flex items-center gap-4 rounded-xl bg-[#16211a]/50 border border-white/5 px-6 py-3 transition-all hover:border-primary/50 hover:bg-[#16211a] hover:shadow-[0_0_20px_rgba(19,236,91,0.1)]">
                                            <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-black transition-colors duration-300">
                                                <span className="material-symbols-outlined text-xl">menu_book</span>
                                            </div>
                                            <div className="flex flex-col text-left">
                                                <span className="text-[10px] font-bold uppercase tracking-wider text-slate-500 group-hover:text-primary/80 transition-colors">Quick Access</span>
                                                <span className="text-sm font-bold text-white">Read Dua After Adhan</span>
                                            </div>
                                            <span className="material-symbols-outlined ml-2 text-slate-600 group-hover:text-primary group-hover:translate-x-1 transition-all">arrow_forward</span>
                                        </Link>
                                    </div>
                                </section>

                                <section>
                                    <div className="flex items-center justify-between mb-6">
                                        <h3 className="text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2 drop-shadow-sm">
                                            <span className="material-symbols-outlined text-primary">format_list_bulleted</span>
                                            Today's Schedule
                                        </h3>
                                        <Link className="text-sm font-medium text-primary hover:text-primary/80 transition-colors flex items-center gap-1" to="/schedule">
                                            View Monthly <span className="material-symbols-outlined text-[16px]">arrow_forward</span>
                                        </Link>
                                    </div>
                                    {/* Dynamic Cards Grid */}
                                    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                                        {PRAYER_SCHEDULE.map((p) => (
                                            <PrayerCard 
                                                key={p.name}
                                                name={p.name} 
                                                time={p.time} 
                                                ampm={p.ampm} 
                                                icon={p.icon} 
                                                // Highlight if this is the next prayer
                                                active={nextPrayer && nextPrayer.name === p.name}
                                                highlightColor="text-primary" 
                                            />
                                        ))}
                                    </div>
                                </section>

                                <section className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <HadithSection />
                                    <div className="rounded-2xl bg-surface-dark/95 backdrop-blur-sm p-6 border border-[#28392e]">
                                        <h4 className="text-sm font-bold uppercase text-slate-400 mb-4">Quick Settings</h4>
                                        <div className="flex flex-col gap-3">
                                            <Link to="/settings" className="flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors cursor-pointer">
                                                <span className="text-white text-sm">Notifications</span>
                                                <div className="w-10 h-5 bg-primary rounded-full relative">
                                                    <div className="absolute right-1 top-1 w-3 h-3 bg-black rounded-full"></div>
                                                </div>
                                            </Link>
                                            <Link to="/settings" className="flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors cursor-pointer">
                                                <span className="text-white text-sm">Adhan Sound</span>
                                                <span className="text-xs text-primary font-medium">Makkah</span>
                                            </Link>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </main>
                    </div>
                    <RunningTextBanner 
                        active={settings.runningText.active} 
                        text={settings.runningText.text}
                        speed={settings.runningText.speed}
                        size={settings.runningText.size}
                    />
                </div>
            );
        };

        const SettingsPage = () => {
            const navigate = useNavigate();
            const { settings, updateSettings, handleImageUpload } = useContext(SettingsContext);
            const fileInputRef = useRef(null);
            const [isLoadingLocation, setIsLoadingLocation] = useState(false);

            const backgrounds = [
                { id: 'default', name: 'Bawaan', url: "https://lh3.googleusercontent.com/aida-public/AB6AXuAOrQLKRUmFQhPxWSXwhFKntvqt5JvcRPZHSGEfJ6534s7zRxMYnhaVjiPPkQb1dSZerTsg6wuTZGGxx3ldiOsjAcwCPu5eXkl9Sh31aJykos91Vq4LS-XOvIdMt9-Lk2PEZSEb3Yy8MYY89dlvY-l8Bpgmn5aJs7P3TRtrwUCaytrFFcAo64P_Bl8hcaxQGUjEsNHbGrRYLfi8MNrFtYTDY-_FVk1V8cUKnIvDDK-pdMtl2WtaznRR5qWi3vmydcqQv2gcQj8jrVk" },
                { id: 'masjid1', name: 'Masjid 1', url: "https://lh3.googleusercontent.com/aida-public/AB6AXuAIQlg9ExURoitbx-siETAk3sji_tYFU2RD2Wb3QHdPwd1H6L68cqmXzKWR48SuW5Q1TgJGbybsbWl77ODKERMY87uU11t43rTCxDRFLaaLxIUir7qXgGhdx1vRzV902TIJpEfXx1RcIX0zVXIdFXNiLLEZOafUijcZfxhvHebu9MTR6EPT6CCadKdhe1-er33j3KC7ryz7jTrysoFFBsT_XX5k4Ny-U6lVS5v63bPOkh4wK6p1Ix4_BXrPe-AwspexXFcJIaDQFHo" },
                { id: 'masjid2', name: 'Masjid 2', url: "https://lh3.googleusercontent.com/aida-public/AB6AXuB2LoTTl_o0k-4Xw86X_LRqqxQIicJpI1M_7AHxoPXjYwPEROPNoYl6t12YQuZKgb2YJFYswu81I8cZd7OmIRIRlQCn362IBxm6m--IkVU78Ndk1m7TSXg7veU9tbE49Um5uhUTf2rGHWHfBM5g19xmfd6tq9z3iE4kO9TUZCzJR4sKlL9t5agvMP6fAgbP2dV8q8thdKo3cReM04o95GiRAw5JhKgj1cWWMj6tFTxbtNBeBwDhpACJ_4Ne5MOe79ED9n1fH_b6YTw" }
            ];

            const onFileChange = async (e) => {
                const file = e.target.files[0];
                if (file) {
                    await handleImageUpload(file);
                }
            };

            const handleAutoLocation = () => {
                setIsLoadingLocation(true);

                // Helper for mock location (fallback)
                const useMockLocation = () => {
                    setTimeout(() => {
                        const mockLat = -6.1754;
                        const mockLng = 106.8272;
                        updateSettings('location', 'lat', mockLat);
                        updateSettings('location', 'lng', mockLng);
                        updateSettings('location', 'city', "Jakarta Pusat, DKI Jakarta (Demo)");
                        setIsLoadingLocation(false);
                        alert("Lokasi diatur ke Jakarta Pusat (Mode Demo). Deteksi GPS asli diblokir oleh browser di lingkungan ini.");
                    }, 1500);
                };

                if (!navigator.geolocation) {
                    useMockLocation();
                    return;
                }
                
                try {
                    navigator.geolocation.getCurrentPosition(async (position) => {
                        // ... success logic ...
                         const { latitude, longitude } = position.coords;
                    
                        updateSettings('location', 'lat', latitude);
                        updateSettings('location', 'lng', longitude);

                        try {
                            const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=10&addressdetails=1`);
                            if (!response.ok) throw new Error("Network response was not ok");
                            
                            const data = await response.json();
                            const city = data.address.city || data.address.town || data.address.village || data.address.county || "Lokasi Terdeteksi";
                            const state = data.address.state || "";
                            const fullLocation = state ? `${city}, ${state}` : city;
                            
                            updateSettings('location', 'city', fullLocation);
                        } catch (error) {
                            console.error("Gagal mendapatkan nama kota:", error);
                            updateSettings('location', 'city', `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`);
                        } finally {
                            setIsLoadingLocation(false);
                        }
                    }, (error) => {
                        // Error callback
                        console.error("Geolocation Error:", error);
                        useMockLocation(); // Fallback to mock if permission denied or policy blocked
                    }, {
                        enableHighAccuracy: false, 
                        timeout: 5000,
                        maximumAge: 60000
                    });
                } catch (e) {
                    console.error("Geolocation Sync Error:", e);
                    useMockLocation();
                }
            };

            return (
                <div className="bg-background-light dark:bg-background-dark font-display min-h-screen flex flex-col overflow-x-hidden text-slate-900 dark:text-white">
                    <header className="flex items-center justify-between whitespace-nowrap border-b border-solid border-slate-200 dark:border-white/10 px-6 lg:px-10 py-4 bg-surface-light dark:bg-background-dark sticky top-0 z-50">
                        <div className="flex items-center gap-4 text-slate-900 dark:text-white">
                            <div className="size-8 flex items-center justify-center text-primary">
                                <span className="material-symbols-outlined text-3xl">mosque</span>
                            </div>
                            <h2 className="text-lg font-bold leading-tight tracking-[-0.015em]">Pengaturan</h2>
                        </div>
                        <div className="flex flex-1 justify-end gap-8">
                            <nav className="hidden md:flex items-center gap-9">
                                <Link className="text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/">Beranda</Link>
                                <Link className="text-primary text-sm font-medium leading-normal border-b-2 border-primary pb-0.5" to="/settings">Pengaturan</Link>
                            </nav>
                        </div>
                    </header>

                    <div className="flex flex-1 max-w-[1440px] mx-auto w-full">
                        <aside className="hidden lg:flex flex-col w-64 border-r border-slate-200 dark:border-white/10 p-6 gap-6 sticky top-[73px] h-[calc(100vh-73px)] overflow-y-auto">
                            <div className="flex flex-col gap-1">
                                <h1 className="text-base font-bold leading-normal mb-1">Kategori</h1>
                                <div className="flex flex-col gap-2">
                                    <button className="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary border border-primary/20">
                                        <span className="material-symbols-outlined" style={{fontSize: '20px'}}>settings</span>
                                        <span className="text-sm font-semibold">Umum &amp; Lokasi</span>
                                    </button>
                                </div>
                            </div>
                            <div className="mt-auto pt-6 border-t border-slate-200 dark:border-white/10">
                                <button onClick={() => navigate('/')} className="flex items-center gap-3 px-3 py-2 w-full text-red-500 hover:bg-red-500/10 rounded-lg transition-colors">
                                    <span className="material-symbols-outlined" style={{fontSize: '20px'}}>logout</span>
                                    <span className="text-sm font-medium">Keluar</span>
                                </button>
                            </div>
                        </aside>

                        <main className="flex-1 p-4 md:p-8 lg:p-10 pb-24">
                            <div className="max-w-[800px] mx-auto flex flex-col gap-10">
                                <div className="flex flex-col gap-2">
                                    <h1 className="text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em]">Pengaturan Aplikasi</h1>
                                    <p className="text-slate-500 dark:text-[#9db9a6] text-lg font-normal">Perubahan yang Anda buat disini akan langsung terlihat di Dashboard.</p>
                                </div>

                                <section className="flex flex-col gap-5">
                                    <div className="border-b border-slate-200 dark:border-white/10 pb-2">
                                        <h2 className="text-xl font-bold flex items-center gap-2">
                                            <span className="material-symbols-outlined text-primary">location_on</span>
                                            Lokasi &amp; Header
                                        </h2>
                                    </div>
                                    <div className="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-slate-200 dark:border-white/5 shadow-sm">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div className="flex flex-col gap-5">
                                                <label className="flex flex-col gap-2">
                                                    <span className="text-sm font-medium">Cari Kota / Wilayah</span>
                                                    <div className="relative">
                                                        <input 
                                                            className="w-full rounded-lg border border-slate-300 dark:border-[#3b5443] bg-white dark:bg-[#1c271f] h-12 px-4 text-base focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-[#9db9a6]" 
                                                            placeholder="Ketik nama kota..." 
                                                            value={settings.location.city}
                                                            onChange={(e) => updateSettings('location', 'city', e.target.value)}
                                                        />
                                                        <span className="material-symbols-outlined absolute right-3 top-3 text-slate-400">search</span>
                                                    </div>
                                                </label>
                                                <div className="grid grid-cols-2 gap-4">
                                                    <label className="flex flex-col gap-2">
                                                        <span className="text-sm font-medium">Latitude</span>
                                                        <input className="w-full rounded-lg border border-slate-300 dark:border-[#3b5443] bg-slate-50 dark:bg-black/20 h-12 px-4 text-base text-slate-500 dark:text-gray-400" readOnly value={settings.location.lat}/>
                                                    </label>
                                                    <label className="flex flex-col gap-2">
                                                        <span className="text-sm font-medium">Longitude</span>
                                                        <input className="w-full rounded-lg border border-slate-300 dark:border-[#3b5443] bg-slate-50 dark:bg-black/20 h-12 px-4 text-base text-slate-500 dark:text-gray-400" readOnly value={settings.location.lng}/>
                                                    </label>
                                                </div>
                                                <button 
                                                    onClick={handleAutoLocation}
                                                    disabled={isLoadingLocation}
                                                    className="mt-2 flex items-center justify-center gap-2 bg-primary/10 hover:bg-primary/20 text-primary h-12 rounded-lg font-medium transition-colors w-full md:w-auto self-start px-6 disabled:opacity-50"
                                                >
                                                    {isLoadingLocation ? (
                                                        <span className="animate-spin material-symbols-outlined text-[20px]">progress_activity</span>
                                                    ) : (
                                                        <span className="material-symbols-outlined text-[20px]">my_location</span>
                                                    )}
                                                    {isLoadingLocation ? 'Mendeteksi...' : 'Deteksi Lokasi Otomatis'}
                                                </button>
                                            </div>
                                            <div className="relative h-64 md:h-auto rounded-xl overflow-hidden group">
                                                <div className="absolute inset-0 bg-cover bg-center" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuA21GuwUz665iw9iiI-XoEOiyCKGJ2LipuwjnKIMvQoV5CNpCBL3DxlPcGs-eOpGnTHeEtF-aMVlAK4AIbX96r8s5F4_k1rIzhG-uDvqALyPPXUsdZ67MEoUj_630m2Zdb3JWZeEukoB8CwqfjiAApGE84v8bJmne4aH1CcC6kEAut9R4Y50KL8mFFKzh1S-dNqmaZ-9szHjs8A6WFNMNY8Ymo10DNsKZV0eEtTNRlZ-yBCsNSh0RTZsu3PkPS6h7YDXtKlMTNMXW8")'}}></div>
                                                <div className="absolute inset-0 bg-black/30 group-hover:bg-black/20 transition-all"></div>
                                                <div className="absolute bottom-3 right-3 bg-white dark:bg-black/80 px-2 py-1 rounded text-xs font-mono opacity-80">
                                                    Google Maps
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <section className="flex flex-col gap-5">
                                    <div className="border-b border-slate-200 dark:border-white/10 pb-2">
                                        <h2 className="text-xl font-bold flex items-center gap-2">
                                            <span className="material-symbols-outlined text-primary">palette</span>
                                            Tampilan &amp; Background
                                        </h2>
                                    </div>
                                    <div className="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-slate-200 dark:border-white/5 shadow-sm flex flex-col gap-8">
                                        <div className="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                            {backgrounds.map(bg => (
                                                <label key={bg.id} className="cursor-pointer group">
                                                    <input 
                                                        className="peer sr-only" 
                                                        type="radio" 
                                                        name="bgOption"
                                                        checked={settings.appearance.bgImage === bg.url}
                                                        onChange={() => updateSettings('appearance', 'bgImage', bg.url)}
                                                    />
                                                    <div className="relative aspect-video rounded-lg overflow-hidden border-2 border-transparent peer-checked:border-primary peer-checked:ring-2 peer-checked:ring-primary/20 transition-all">
                                                        <div className="absolute inset-0 bg-cover bg-center" style={{backgroundImage: `url("${bg.url}")`}}></div>
                                                        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/40 transition-opacity">
                                                            <span className="text-white font-medium text-xs">{bg.name}</span>
                                                        </div>
                                                        {settings.appearance.bgImage === bg.url && (
                                                            <div className="absolute top-2 right-2 bg-primary text-black p-1 rounded-full">
                                                                <span className="material-symbols-outlined text-sm font-bold">check</span>
                                                            </div>
                                                        )}
                                                    </div>
                                                </label>
                                            ))}
                                            
                                            {/* Custom Upload Card */}
                                            <div 
                                                className={`relative aspect-video rounded-lg overflow-hidden border-2 border-dashed transition-all flex flex-col items-center justify-center gap-2 cursor-pointer
                                                    ${settings.appearance.customBg && settings.appearance.bgImage === settings.appearance.customBg && !settings.appearance.slideshowActive 
                                                        ? 'border-primary bg-primary/5' 
                                                        : 'border-slate-300 dark:border-slate-600 hover:border-primary dark:hover:border-primary hover:bg-slate-50 dark:hover:bg-white/5 text-slate-500 dark:text-slate-400'}`}
                                                onClick={() => fileInputRef.current.click()}
                                            >
                                                {settings.appearance.customBg ? (
                                                    <React.Fragment>
                                                        <div className="absolute inset-0 bg-cover bg-center opacity-50" style={{backgroundImage: `url("${settings.appearance.customBg}")`}}></div>
                                                        <div className="relative z-10 flex flex-col items-center">
                                                            <span className="material-symbols-outlined text-2xl text-white drop-shadow-md">edit</span>
                                                            <span className="text-xs font-medium text-white drop-shadow-md">Ganti Gambar</span>
                                                        </div>
                                                    </React.Fragment>
                                                ) : (
                                                    <React.Fragment>
                                                        <span className="material-symbols-outlined text-2xl">upload_file</span>
                                                        <span className="text-xs font-medium">Upload Sendiri</span>
                                                    </React.Fragment>
                                                )}
                                                <input 
                                                    type="file" 
                                                    ref={fileInputRef} 
                                                    onChange={onFileChange} 
                                                    accept="image/*" 
                                                    className="hidden" 
                                                />
                                            </div>
                                        </div>
                                        <div className="border-t border-slate-200 dark:border-white/10 pt-6 flex flex-col gap-6">
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <label className="text-sm font-medium">Opacity Overlay</label>
                                                    <span className="text-sm font-medium text-primary">{settings.appearance.opacity}%</span>
                                                </div>
                                                <input 
                                                    className="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary" 
                                                    max="100" min="0" step="5" type="range" 
                                                    value={settings.appearance.opacity}
                                                    onChange={(e) => updateSettings('appearance', 'opacity', e.target.value)}
                                                />
                                            </div>
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <label className="text-sm font-medium">Efek Blur</label>
                                                    <span className="text-sm font-medium text-primary">{settings.appearance.blur}px</span>
                                                </div>
                                                <input 
                                                    className="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary" 
                                                    max="20" min="0" step="1" type="range" 
                                                    value={settings.appearance.blur}
                                                    onChange={(e) => updateSettings('appearance', 'blur', e.target.value)}
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <section className="flex flex-col gap-5">
                                    <div className="border-b border-slate-200 dark:border-white/10 pb-2">
                                        <h2 className="text-xl font-bold flex items-center gap-2">
                                            <span className="material-symbols-outlined text-primary">subtitles</span>
                                            Running Text
                                        </h2>
                                    </div>
                                    <div className="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-slate-200 dark:border-white/5 shadow-sm">
                                        <div className="flex items-center justify-between mb-5">
                                            <span className="text-sm font-medium">Status Aktif</span>
                                            <label className="relative inline-flex items-center cursor-pointer">
                                                <input 
                                                    className="sr-only peer" 
                                                    type="checkbox"
                                                    checked={settings.runningText.active}
                                                    onChange={(e) => updateSettings('runningText', 'active', e.target.checked)}
                                                />
                                                <div className="w-11 h-6 bg-slate-300 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                            </label>
                                        </div>
                                        <div className="grid grid-cols-1 gap-6">
                                            <label className="flex flex-col gap-2">
                                                <span className="text-sm font-medium">Konten Teks</span>
                                                <textarea 
                                                    className="w-full rounded-lg border border-slate-300 dark:border-[#3b5443] bg-white dark:bg-[#1c271f] min-h-[80px] p-3 text-sm focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                                                    value={settings.runningText.text}
                                                    onChange={(e) => updateSettings('runningText', 'text', e.target.value)}
                                                ></textarea>
                                            </label>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <label className="flex flex-col gap-2">
                                                    <span className="text-sm font-medium">Kecepatan (1-10)</span>
                                                    <input 
                                                        className="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary" 
                                                        max="10" min="1" type="range" 
                                                        value={settings.runningText.speed}
                                                        onChange={(e) => updateSettings('runningText', 'speed', e.target.value)}
                                                    />
                                                </label>
                                                <label className="flex flex-col gap-2">
                                                    <span className="text-sm font-medium">Ukuran Teks</span>
                                                    <div className="relative">
                                                        <select 
                                                            className="w-full appearance-none rounded-lg border border-slate-300 dark:border-[#3b5443] bg-white dark:bg-[#1c271f] h-10 px-3 pr-8 text-sm focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all cursor-pointer"
                                                            value={settings.runningText.size}
                                                            onChange={(e) => updateSettings('runningText', 'size', e.target.value)}
                                                        >
                                                            <option value="small">Kecil</option>
                                                            <option value="medium">Sedang</option>
                                                            <option value="large">Besar</option>
                                                            <option value="xl">Sangat Besar</option>
                                                        </select>
                                                        <span className="material-symbols-outlined absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 text-lg">expand_more</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <div className="fixed bottom-0 left-0 right-0 bg-surface-light dark:bg-[#182c20] border-t border-slate-200 dark:border-white/10 p-4 lg:pl-72 z-40 shadow-lg">
                                    <div className="max-w-[800px] mx-auto flex items-center justify-between">
                                        <button className="text-slate-600 dark:text-slate-300 hover:text-red-500 font-medium px-4 py-2 transition-colors">
                                            Reset Pengaturan
                                        </button>
                                        <button onClick={() => navigate('/')} className="px-8 py-2.5 rounded-lg bg-primary hover:bg-[#0fdc50] text-black font-bold shadow-lg shadow-primary/20 transition-all transform active:scale-95 flex items-center gap-2">
                                            <span className="material-symbols-outlined text-[20px]">save</span>
                                            Simpan & Kembali
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            );
        };

        const QiblaPage = () => {
            const navigate = useNavigate();
            const [heading, setHeading] = useState(0); 
            const qiblaAngle = 295; 
            return (
                <div className="relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white transition-colors duration-200">
                    <header className="sticky top-0 z-50 w-full border-b border-gray-200 dark:border-[#28392e] bg-surface-light/80 dark:bg-background-dark/80 backdrop-blur-md">
                        <div className="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center gap-4">
                                <Link to="/" className="flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors">
                                    <span className="material-symbols-outlined">arrow_back</span>
                                    <span className="hidden sm:inline text-sm font-medium">Kembali</span>
                                </Link>
                                <div className="h-6 w-px bg-slate-200 dark:bg-slate-700"></div>
                                <h1 className="text-lg font-bold">Arah Kiblat</h1>
                            </div>
                        </div>
                    </header>
                    <main className="flex-1 flex flex-col items-center justify-center p-6 sm:p-8">
                        <div className="w-full max-w-md flex flex-col items-center gap-8">
                            <div className="relative size-72 sm:size-80 flex items-center justify-center">
                                <div className="absolute inset-0 rounded-full border-4 border-slate-200 dark:border-[#28392e] shadow-2xl"></div>
                                <div className="absolute inset-2 rounded-full border border-slate-100 dark:border-white/5"></div>
                                <div className="absolute -top-6 left-1/2 -translate-x-1/2 flex flex-col items-center gap-1"><div className="w-1 h-3 bg-red-500 rounded-full"></div></div>
                                <div className="compass-dial w-full h-full rounded-full bg-surface-light dark:bg-surface-dark shadow-inner flex items-center justify-center relative" style={{ transform: `rotate(${-heading}deg)` }}>
                                    <div className="absolute top-4 font-bold text-red-500 text-lg">N</div>
                                    <div className="absolute bottom-4 font-bold text-slate-400 text-lg">S</div>
                                    <div className="absolute right-4 font-bold text-slate-400 text-lg">E</div>
                                    <div className="absolute left-4 font-bold text-slate-400 text-lg">W</div>
                                    {[0, 30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330].map(deg => (
                                        <div key={deg} className="absolute w-full h-full flex justify-center pointer-events-none" style={{ transform: `rotate(${deg}deg)` }}><div className="w-0.5 h-2 bg-slate-300 dark:bg-slate-700 mt-2"></div></div>
                                    ))}
                                    <div className="absolute w-full h-full flex justify-center pointer-events-none" style={{ transform: `rotate(${qiblaAngle}deg)` }}>
                                        <div className="mt-8 flex flex-col items-center gap-1"><div className="size-8 bg-black border border-amber-400 rounded-sm flex items-center justify-center shadow-lg relative z-10"><div className="w-full h-[2px] bg-amber-400 absolute top-2"></div></div><div className="w-0.5 h-16 bg-primary/50 absolute top-8 -z-0"></div></div>
                                    </div>
                                    <div className="absolute size-3 bg-slate-800 dark:bg-white rounded-full z-20"></div>
                                </div>
                            </div>
                            <div className="w-full bg-slate-100 dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-[#28392e]">
                                <label className="text-xs font-bold uppercase text-slate-500 mb-2 block flex justify-between"><span>Simulasi Rotasi HP</span><span className="text-primary font-normal">Putar Slider</span></label>
                                <input type="range" min="0" max="360" value={heading} onChange={(e) => setHeading(parseInt(e.target.value))} className="w-full h-2 bg-slate-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary"/>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const MonthlySchedulePage = () => {
            const navigate = useNavigate();
            const [currentDate, setCurrentDate] = useState(new Date());
            const monthData = useMemo(() => {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const data = [];
                for (let i = 1; i <= daysInMonth; i++) {
                    const dateObj = new Date(year, month, i);
                    const minOffset = i % 5;
                    data.push({
                        day: i,
                        dateObj,
                        dayName: dateObj.toLocaleDateString('id-ID', { weekday: 'long' }),
                        isToday: new Date().toDateString() === dateObj.toDateString(),
                        fajr: `04:${30 + minOffset}`, sunrise: `05:${45 + minOffset}`, dhuhr: `11:${50 + (minOffset % 3)}`, asr: `15:${10 + (minOffset % 4)}`, maghrib: `17:${55 + minOffset}`, isha: `19:${10 + minOffset}`
                    });
                }
                return data;
            }, [currentDate]);
            const nextMonth = () => setCurrentDate(new Date(currentDate.setMonth(currentDate.getMonth() + 1)));
            const prevMonth = () => setCurrentDate(new Date(currentDate.setMonth(currentDate.getMonth() - 1)));
            const monthLabel = currentDate.toLocaleDateString('id-ID', { month: 'long', year: 'numeric' });

            return (
                <div className="relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white transition-colors duration-200">
                    <header className="sticky top-0 z-50 w-full border-b border-gray-200 dark:border-[#28392e] bg-surface-light/80 dark:bg-background-dark/80 backdrop-blur-md">
                        <div className="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center gap-4">
                                <Link to="/" className="flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"><span className="material-symbols-outlined">arrow_back</span><span className="hidden sm:inline text-sm font-medium">Kembali</span></Link>
                                <div className="h-6 w-px bg-slate-200 dark:bg-slate-700"></div>
                                <h1 className="text-lg font-bold">Jadwal Sholat Bulanan</h1>
                            </div>
                        </div>
                    </header>
                    <main className="flex-1 px-4 py-8 sm:px-6 lg:px-8">
                        <div className="mx-auto max-w-7xl flex flex-col gap-6">
                            <div className="flex flex-col sm:flex-row items-center justify-between gap-4 bg-surface-light dark:bg-surface-dark p-4 rounded-2xl border border-slate-200 dark:border-[#28392e] shadow-sm">
                                <div className="flex items-center gap-4 bg-slate-100 dark:bg-black/20 p-1.5 rounded-xl">
                                    <button onClick={prevMonth} className="p-2 rounded-lg hover:bg-white dark:hover:bg-white/10 text-slate-600 dark:text-slate-300 transition-all shadow-sm"><span className="material-symbols-outlined text-sm">chevron_left</span></button>
                                    <span className="text-base font-bold min-w-[140px] text-center">{monthLabel}</span>
                                    <button onClick={nextMonth} className="p-2 rounded-lg hover:bg-white dark:hover:bg-white/10 text-slate-600 dark:text-slate-300 transition-all shadow-sm"><span className="material-symbols-outlined text-sm">chevron_right</span></button>
                                </div>
                            </div>
                            <div className="overflow-hidden rounded-2xl border border-slate-200 dark:border-[#28392e] bg-surface-light dark:bg-surface-dark shadow-sm">
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm text-left">
                                        <thead className="bg-slate-50 dark:bg-black/20 text-slate-500 dark:text-slate-400 font-medium border-b border-slate-200 dark:border-[#28392e]">
                                            <tr><th className="px-6 py-4">Tanggal</th><th className="px-6 py-4 text-center">Subuh</th><th className="px-6 py-4 text-center">Dzuhur</th><th className="px-6 py-4 text-center">Ashar</th><th className="px-6 py-4 text-center">Maghrib</th><th className="px-6 py-4 text-center">Isya</th></tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100 dark:divide-[#28392e]">
                                            {monthData.map((data, idx) => (
                                                <tr key={idx} className={`transition-colors hover:bg-slate-50 dark:hover:bg-white/5 ${data.isToday ? 'bg-primary/5 dark:bg-primary/10' : ''}`}>
                                                    <td className="px-6 py-4 whitespace-nowrap"><div className="flex flex-col"><span className={`font-bold text-base ${data.isToday ? 'text-primary' : 'text-slate-900 dark:text-white'}`}>{data.day}</span><span className="text-xs text-slate-500 dark:text-slate-400">{data.dayName}</span></div></td>
                                                    <td className="px-6 py-4 text-center font-mono font-medium text-slate-700 dark:text-slate-200">{data.fajr}</td>
                                                    <td className="px-6 py-4 text-center font-mono font-medium text-slate-700 dark:text-slate-200">{data.dhuhr}</td>
                                                    <td className="px-6 py-4 text-center font-mono font-medium text-slate-700 dark:text-slate-200">{data.asr}</td>
                                                    <td className="px-6 py-4 text-center font-mono font-medium text-slate-700 dark:text-slate-200">{data.maghrib}</td>
                                                    <td className="px-6 py-4 text-center font-mono font-medium text-slate-700 dark:text-slate-200">{data.isha}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const DuaPage = () => {
            const navigate = useNavigate();
            const [playing, setPlaying] = useState(false);
            const [activeTab, setActiveTab] = useState('daily');

            return (
                <div className="relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white transition-colors duration-200">
                    <header className="sticky top-0 z-50 w-full border-b border-gray-200 dark:border-[#28392e] bg-surface-light/80 dark:bg-background-dark/80 backdrop-blur-md">
                        <div className="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center gap-8">
                                <Link to="/" className="flex items-center gap-3 text-emerald-700 dark:text-white">
                                    <div className="size-8 text-primary">
                                        <svg className="w-full h-full" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                            <path clipRule="evenodd" d="M39.475 21.6262C40.358 21.4363 40.6863 21.5589 40.7581 21.5934C40.7876 21.655 40.8547 21.857 40.8082 22.3336C40.7408 23.0255 40.4502 24.0046 39.8572 25.2301C38.6799 27.6631 36.5085 30.6631 33.5858 33.5858C30.6631 36.5085 27.6632 38.6799 25.2301 39.8572C24.0046 40.4502 23.0255 40.7407 22.3336 40.8082C21.8571 40.8547 21.6551 40.7875 21.5934 40.7581C21.5589 40.6863 21.4363 40.358 21.6262 39.475C21.8562 38.4054 22.4689 36.9657 23.5038 35.2817C24.7575 33.2417 26.5497 30.9744 28.7621 28.762C30.9744 26.5497 33.2417 24.7574 35.2817 23.5037C36.9657 22.4689 38.4054 21.8562 39.475 21.6262ZM4.41189 29.2403L18.7597 43.5881C19.8813 44.7097 21.4027 44.9179 22.7217 44.7893C24.0585 44.659 25.5148 44.1631 26.9723 43.4579C29.9052 42.0387 33.2618 39.5667 36.4142 36.4142C39.5667 33.2618 42.0387 29.9052 43.4579 26.9723C44.1631 25.5148 44.659 24.0585 44.7893 22.7217C44.9179 21.4027 44.7097 19.8813 43.5881 18.7597L29.2403 4.41187C27.8527 3.02428 25.8765 3.02573 24.2861 3.36776C22.6081 3.72863 20.7334 4.58419 18.8396 5.74801C16.4978 7.18716 13.9881 9.18353 11.5858 11.5858C9.18354 13.988 7.18717 16.4978 5.74802 18.8396C4.58421 20.7334 3.72865 22.6081 3.36778 24.2861C3.02574 25.8765 3.02429 27.8527 4.41189 29.2403Z" fill="currentColor" fillRule="evenodd"></path>
                                        </svg>
                                    </div>
                                    <h2 className="hidden md:block text-lg font-bold leading-tight tracking-[-0.015em]">MuslimPro</h2>
                                </Link>
                                <nav className="hidden md:flex items-center gap-6">
                                    <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/">Beranda</Link>
                                    <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/schedule">Jadwal Sholat</Link>
                                    <Link className="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" to="/qibla">Qibla</Link>
                                    <Link className="text-sm font-medium text-primary border-b-2 border-primary pb-0.5" to="/dua">Doa-doa</Link>
                                </nav>
                            </div>
                            <div className="flex items-center gap-4">
                                <div className="relative hidden sm:block">
                                    <span className="absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400">
                                        <span className="material-symbols-outlined text-[20px]">search</span>
                                    </span>
                                    <input className="w-full rounded-lg border-none bg-slate-100 dark:bg-[#28392e] py-2 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-400 focus:ring-2 focus:ring-primary" placeholder="Cari doa..." type="text"/>
                                </div>
                                <button className="md:hidden text-slate-900 dark:text-white">
                                    <span className="material-symbols-outlined">menu</span>
                                </button>
                            </div>
                        </div>
                    </header>
                    <main className="flex-1 px-4 py-8 sm:px-6 lg:px-8">
                        <div className="mx-auto max-w-4xl">
                            <div className="mb-6 flex flex-col justify-between gap-4 md:flex-row md:items-start">
                                <div>
                                    <div className="mb-2 flex items-center gap-2">
                                        <span className="inline-flex items-center rounded-full bg-primary/10 px-2.5 py-0.5 text-xs font-medium text-emerald-600 dark:text-primary">Kumpulan Doa</span>
                                    </div>
                                    <h1 className="text-3xl font-black tracking-tight text-slate-900 dark:text-white sm:text-4xl">Doa & Dzikir</h1>
                                    <p className="mt-2 text-base text-slate-600 dark:text-slate-400">Temukan ketenangan melalui doa harian dan dzikir.</p>
                                </div>
                                <button onClick={() => navigate('/')} className="group inline-flex items-center justify-center gap-2 rounded-lg bg-white dark:bg-[#28392e] px-4 py-2.5 text-sm font-semibold text-slate-700 dark:text-white shadow-sm ring-1 ring-inset ring-slate-300 dark:ring-slate-600 transition hover:bg-slate-50 dark:hover:bg-[#34483b]">
                                    <span className="material-symbols-outlined text-[20px] transition-transform group-hover:-translate-x-0.5">arrow_back</span>
                                    <span>Kembali</span>
                                </button>
                            </div>

                            {/* TABS */}
                            <div className="flex space-x-1 rounded-xl bg-slate-200 dark:bg-surface-dark p-1 mb-8">
                                <button
                                    onClick={() => setActiveTab('daily')}
                                    className={`w-full rounded-lg py-2.5 text-sm font-medium leading-5 transition-all ${
                                        activeTab === 'daily'
                                            ? 'bg-white dark:bg-[#28392e] shadow text-primary'
                                            : 'text-slate-600 dark:text-slate-400 hover:bg-white/[0.12] hover:text-white'
                                    }`}
                                >
                                    Doa Harian
                                </button>
                                <button
                                    onClick={() => setActiveTab('ai')}
                                    className={`w-full rounded-lg py-2.5 text-sm font-medium leading-5 transition-all flex items-center justify-center gap-2 ${
                                        activeTab === 'ai'
                                            ? 'bg-white dark:bg-[#28392e] shadow text-primary'
                                            : 'text-slate-600 dark:text-slate-400 hover:bg-white/[0.12] hover:text-white'
                                    }`}
                                >
                                    <span className="material-symbols-outlined text-lg">auto_awesome</span>
                                    Pencari Doa AI
                                </button>
                            </div>

                            {activeTab === 'ai' ? (
                                <AIDuaGenerator />
                            ) : (
                                <React.Fragment>
                                    {/* Static Content (Existing) */}
                                    <div className="mb-8 overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm border border-slate-200 dark:border-slate-800">
                                        <div className="p-4 sm:p-6">
                                            <div className="flex flex-col sm:flex-row items-center gap-6">
                                                <div className="relative size-20 sm:size-24 shrink-0 overflow-hidden rounded-xl shadow-inner group">
                                                    <div className="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"></div>
                                                    <img alt="Islamic Pattern" className="h-full w-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAACJL4VJ59qjUrHebvUyXHJc05bWLh8u7PIhRkGdOf-PPxhgpvUXL66UEpGEt-aLxm9au5QAmu6Jm5TEAF9sGDkDexrWbH8AEDQmnvgkCxeu67o66TjAgjxLmOjqhxVRfFBC69kBM3-cVDC8Cz5j-aw5tZ3sulDmdMZNP_3WbUqbiAjVg8x7t7iciB2Ew-hH0ODA-tXWH-4YTKwdkLyqv27TTifGJ2Z0-hXC3lWBYgxpdHcITnaFTy2p4uWkwRDvnxOaChGzOzpZA"/>
                                                    <div className="absolute inset-0 flex items-center justify-center">
                                                        <span className="material-symbols-outlined text-white drop-shadow-md">music_note</span>
                                                    </div>
                                                </div>
                                                <div className="flex flex-1 flex-col justify-center w-full">
                                                    <div className="mb-4 flex items-center justify-between">
                                                        <div>
                                                            <h3 className="text-lg font-bold text-slate-900 dark:text-white">Recitation</h3>
                                                            <p className="text-sm font-medium text-slate-500 dark:text-slate-400">Mishary Rashid Alafasy</p>
                                                        </div>
                                                        <div className="flex gap-2">
                                                            <button className="rounded-full p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 dark:text-slate-400 transition-colors"><span className="material-symbols-outlined">replay_10</span></button>
                                                            <button onClick={() => setPlaying(!playing)} className="flex size-10 md:size-12 items-center justify-center rounded-full bg-primary text-background-dark shadow-lg shadow-primary/30 hover:bg-[#0fd650] hover:scale-105 transition-all"><span className="material-symbols-outlined text-[24px] md:text-[28px]">{playing ? 'pause' : 'play_arrow'}</span></button>
                                                            <button className="rounded-full p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 dark:text-slate-400 transition-colors"><span className="material-symbols-outlined">forward_10</span></button>
                                                        </div>
                                                    </div>
                                                    <div className="relative mb-1 h-1.5 w-full cursor-pointer rounded-full bg-slate-200 dark:bg-slate-700">
                                                        <div className="absolute h-full w-1/3 rounded-full bg-primary"></div>
                                                        <div className="absolute left-1/3 top-1/2 -ml-1.5 size-3 -translate-y-1/2 rounded-full border-2 border-white bg-primary shadow-sm"></div>
                                                    </div>
                                                    <div className="flex justify-between text-xs font-medium text-slate-400 dark:text-slate-500"><span>0:14</span><span>0:42</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm border border-slate-200 dark:border-slate-800">
                                        <div className="flex items-center justify-between border-b border-slate-100 dark:border-slate-800 px-4 py-3 sm:px-6">
                                            <div className="text-sm font-medium text-slate-500 dark:text-slate-400">Doa Setelah Adzan</div>
                                            <div className="flex items-center gap-1">
                                                <button className="rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-white/5 dark:hover:text-slate-200 transition-colors" title="Copy Text"><span className="material-symbols-outlined text-[20px]">content_copy</span></button>
                                                <button className="rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-white/5 dark:hover:text-slate-200 transition-colors" title="Bookmark"><span className="material-symbols-outlined text-[20px]">bookmark_border</span></button>
                                                <button className="rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-white/5 dark:hover:text-slate-200 transition-colors" title="Share"><span className="material-symbols-outlined text-[20px]">share</span></button>
                                            </div>
                                        </div>
                                        <div className="p-6 sm:p-10">
                                            <div className="mb-10 text-center" dir="rtl">
                                                <h1 className="font-arabic text-4xl sm:text-5xl lg:text-[64px] leading-[1.6] sm:leading-[1.8] text-slate-800 dark:text-white">Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø±ÙŽØ¨ÙŽÙ‘ Ù‡ÙŽØ°ÙÙ‡Ù Ø§Ù„Ø¯ÙŽÙ‘Ø¹Ù’ÙˆÙŽØ©Ù Ø§Ù„ØªÙŽÙ‘Ø§Ù…ÙŽÙ‘Ø©Ù ÙˆÙŽØ§Ù„ØµÙŽÙ‘Ù„ÙŽØ§Ø©Ù Ø§Ù„Ù’Ù‚ÙŽØ§Ø¦ÙÙ…ÙŽØ©Ù Ø¢ØªÙ Ù…ÙØ­ÙŽÙ…ÙŽÙ‘Ø¯Ù‹Ø§ Ø§Ù„Ù’ÙˆÙŽØ³ÙÙŠÙ„ÙŽØ©ÙŽ ÙˆÙŽØ§Ù„Ù’ÙÙŽØ¶ÙÙŠÙ„ÙŽØ©ÙŽ ÙˆÙŽØ§Ø¨Ù’Ø¹ÙŽØ«Ù’Ù‡Ù Ù…ÙŽÙ‚ÙŽØ§Ù…Ù‹Ø§ Ù…ÙŽØ­Ù’Ù…ÙÙˆØ¯Ù‹Ø§ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙˆÙŽØ¹ÙŽØ¯Ù’ØªÙŽÙ‡Ù</h1>
                                            </div>
                                            <div className="mb-10 flex items-center justify-center"><div className="h-1 w-16 rounded-full bg-primary/20"></div></div>
                                            <div className="mb-8 text-center">
                                                <h3 className="mb-3 text-sm font-bold uppercase tracking-wider text-emerald-600 dark:text-primary/80">Latin Transliteration</h3>
                                                <p className="text-lg sm:text-xl font-medium leading-relaxed text-slate-700 dark:text-slate-200">Allahumma Rabba hadzihid-da'watit-tammah, wash-sholatil-qa'imah, ati Muhammadanil-wasilata wal-fadhilah, wab'atshu maqamam-mahmudanil-ladzi wa'adtah.</p>
                                            </div>
                                            <div className="rounded-xl bg-slate-50 dark:bg-white/5 p-6 text-center">
                                                <h3 className="mb-3 text-sm font-bold uppercase tracking-wider text-slate-400 dark:text-slate-500">Terjemahan Indonesia</h3>
                                                <p className="text-base sm:text-lg italic leading-relaxed text-slate-600 dark:text-slate-400">"Ya Allah, Tuhan yang memiliki panggilan ini, yang sempurna dan shalat yang tetap didirikan, karuniailah Nabi Muhammad wasilah (tempat yang luhur) dan kelebihan. Dan bangkitkanlah beliau pada kedudukan yang terpuji yang telah Engkau janjikan."</p>
                                            </div>
                                            <div className="mt-6 text-center"><span className="inline-flex items-center gap-1.5 rounded-full border border-slate-200 dark:border-slate-700 px-3 py-1 text-xs font-medium text-slate-500 dark:text-slate-500"><span className="material-symbols-outlined text-[14px]">menu_book</span>HR. Bukhari</span></div>
                                        </div>
                                    </div>
                                </React.Fragment>
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const App = () => {
            return (
                <SettingsProvider>
                    <MemoryRouter>
                        <Routes>
                            <Route path="/" element={<DashboardPage />} />
                            <Route path="/dua" element={<DuaPage />} />
                            <Route path="/settings" element={<SettingsPage />} />
                            <Route path="/schedule" element={<MonthlySchedulePage />} />
                            <Route path="/qibla" element={<QiblaPage />} />
                        </Routes>
                    </MemoryRouter>
                </SettingsProvider>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
